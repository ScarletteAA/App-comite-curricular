// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model sede {
  id          String     @id @default(uuid())
  name        String
  facultades  facultad[]
  historiales history[]
}

model facultad {
  id          String    @id @default(uuid())
  name        String
  sede        sede      @relation(fields: [sedeId], references: [id])
  sedeId      String
  carreras    carrera[]
  historiales history[]
}

model carrera {
  id          String               @id @default(uuid())
  name        String
  facultad    facultad             @relation(fields: [facultadId], references: [id])
  facultadId  String
  asesora     asesora              @relation(fields: [asesoraId], references: [id])
  asesoraId   String
  fechaInicio String
  is_Carrera_Espejo Boolean
  asignaturas asignatura_carrera[]
  fases       fases_carrera[]
}

model asignatura {
  id       String               @id @default(uuid())
  name     String
  carreras asignatura_carrera[]
}

model asignatura_carrera {
  id           String     @id @default(uuid())
  carrera      carrera    @relation(fields: [carreraId], references: [id])
  carreraId    String
  asignatura   asignatura @relation(fields: [asignaturaId], references: [id])
  asignaturaId String
}

model asesora {
  id          String    @id @default(uuid())
  name        String
  email       String    @unique
  password    String
  carreras    carrera[]
  historiales history[]
}

model history {
  id          String   @id @default(uuid())
  fecha       DateTime
  descripcion String
  asesora     asesora  @relation(fields: [id_asesora], references: [id])
  id_asesora  String
  sede        sede     @relation(fields: [id_sede], references: [id])
  id_sede     String
  facultad    facultad @relation(fields: [id_facultad], references: [id])
  id_facultad String
}

model seguimiento {
  id               String   @id @default(uuid())
  nombre_fase      String
  fase_carrera     fases_carrera[]
}

model evaluacion {
  id               String   @id @default(uuid())
  nombre_fase      String
  fase_carrera     fases_carrera[]
}

model fases_carrera {
  id              String   @id @default(uuid())
  carrera         carrera  @relation(fields: [id_carrera], references: [id])
  id_carrera      String
  seguimiento     seguimiento @relation(fields: [id_seguimiento], references: [id])
  id_seguimiento  String
  evaluacion      evaluacion  @relation(fields: [id_evaluacion], references: [id])
  id_evaluacion   String
}
